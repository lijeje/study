# 2장 - 테스트

# 2**장 테스트**

테스트를 통해 코드와 설계의 결함을 파악한 뒤 코드의 결함을 제거할 수 있다. 

테스트는 가능한 작은단위로 쪼개어 접근해야한다.

- 단위테스트의 장점
    - 개발자가 설계하고 만든 코드가 원래 의도와같이 작동하는지 빠르고 간단하게 확인할 수 있다.
    - 어느 단위에서 오류 또는 예외가 발생하는 지 빠르게 확인할 수 있다.
    - 기능이 추가되면 테스트도 추가해나가는 식의 점진적인 개발이 가능하다. →수정한 코드에 영향을 받지  않음.
    
![267C9F91-98FB-43A9-B3E0-5DC8265C2A08.jpeg](IMG%2F267C9F91-98FB-43A9-B3E0-5DC8265C2A08.jpeg)

- UserDaoTest의 문제점
    - 테스트코드에서 출력한 값들이 일치하는지 사람이 수동확인해야함.
    - main()메소드가 많아지면 메소드를 매번 실행하기 번거로움.
- UserDaoTest의 문제점 해결 방법
    - 자바 테스팅 프레임워크(JUnit)을 이용한다.
    - main()메소드의 테스트 메소드를 일반 메소드로 옮긴다.
- JUnit 테스트 메소드 선언 조건
- 
![702C8646-E816-4814-A98C-3800AC7356B4.jpeg](IMG%2F702C8646-E816-4814-A98C-3800AC7356B4.jpeg)


1. 메소드는 퍼블릭으로 선언
2. 메소드에 @TEST 애노테이션 붙이기

- 테스트의 일관성 (코드에 변경사항이 없다면 항상 동일한 결과반환) 을 위해 추가한 코드
    - deleteAll( )
    - getCount( )
    - deleteAll( )과 getCount()의 테스트
    
- 포괄적인 테스트()
- 
![BD44E43C-15B4-41E1-B6EA-F67AEB51D482.jpeg](IMG%2FBD44E43C-15B4-41E1-B6EA-F67AEB51D482.jpeg)

- 예외상황테스트

![500FCE96-37AF-43F9-8632-E6B0EF6D4D81.jpeg](IMG%2F500FCE96-37AF-43F9-8632-E6B0EF6D4D81.jpeg)

- 테스트는 다양한 경우에 대해 전문적으로 수행되어야 하며 그러기 위해 네거티브 테스트를 먼저 만들어야 할 필요가 있다. (내 pc에서는 잘 되는데 라는 변명은 No!)

### 테스트가 이끄는 개발

- 테스트 주도 개발`cf.TDD`:  만들고자 하는 기능의 내용을 담고 있으면서 만들어진 코드를 검증도 해줄 수 있도록 테스트 코드를 선 개발하는 방식
    - 장점
        - 테스트를 빠짐없이 만들 수 있음
        - 테스트를 매번 성공시키며 코드에 확신을 가질 수 있음
        - 개발코드의 오류를 빨리 발견할 수 있기 때문에 쉽게 대응 가능

### 테스트코드의 개선

![620D1C8E-0455-4DF7-B158-D86B03CCB224.jpeg](IMG%2F620D1C8E-0455-4DF7-B158-D86B03CCB224.jpeg)

- JUnit은 @Test가 붙은 메소드를 실행하기 전과 후에 각각 @Before과 @After가 붙은 메소드를 자동으로 실행하기 때문에 테스트 전 후에 실행되는 중복작업들을 처리하기 편하다
- @Before과 @After를 테스트 메소드에서 직접 호출하지 않기 때문에 주고받을 정보가 있는 경우 인스턴스 변수를 이용해야 한다.
- JUnit은 테스트메소드를 실행할때마다 새로운 오브젝트를 만드는데 이는 각각의 테스트가 서로 영향을 주지 않게 하기 위함이다. 따라서 공통적으로 사용되는 코드가 있다면 일반메소드로 분리해야 한다.

- 픽스처 : 테스트를 수행하는데 필요한 정보나 오브젝트

## 2.4 스프링 테스트 적용

- 문제점
    - @Before메소드가 테스트 메소드 개수만큼 반복됨
    - 애플리케이션 컨텍스트가 초기화될 때 어떤 빈은 독자적으로 많은 리소스를 할당하거나  독립적인 스레드를 띄움.
- 해결방법

![E6D4DEF2-AA52-4987-8FFA-B77D17F3F027.jpeg](IMG%2FE6D4DEF2-AA52-4987-8FFA-B77D17F3F027.jpeg)

## 2.5 학습테스트로 배우는 스프링

- 학습테스트의 장점
    - 다양한  조건에 따른 기능을손쉽게  확인 가능
    - 다양한 기능과 조건에 대한 테스트  코드를 남겨두고  테스트가 가능하다.
    - 남겨둔 테스트를 통해 프레임워크나 제품이 업그레이드 되었을때 호환성  검증 테스트를 할  수 있다.
    - 테스트 작성에 대한 좋은 훈련이 된다.
    - 테스트를 통해 학습의  능률을 올릴 수 있다.
- 버그 테스트
    - 테스트의 완성도를 높일 수 있다.
    - 버그를 명확하게 분석할 수 있다.
    - 기술적인 문제를 해결하는데 도움이 된다.
- 동등분할 - 같은 결과를 내는 값의 범위를 구분해서 대표값으로 테스트하는 방법
- 경계값 분석 - 에러는 동등분할 범위의 경계에서 주로  많이 발생한다는 특징을 이용해서 경계의 근처에 있는 값을 이용해 테스트 하는 방법